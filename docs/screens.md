# 画面一覧

要件に基づく画面・ルートの一覧とアクセス権限。Next.js App Router の `app/` 配下のルート設計のたたき台。

**凡例**
- **アクセス**: 一般 = 一般利用者, 司書 = 司書・管理者,  sys = システム管理者
- **認証**: 全画面でログイン必須（未ログインはログイン画面へリダイレクト）

---

## 認証まわり

| パス（案） | 画面名 | 説明 | アクセス |
|------------|--------|------|----------|
| `/login` | ログイン | メール+パスワードでログイン | 未ログイン時のみ |
| `/register` | 会員登録 | 新規利用者登録（メール・パスワード・名前等） | 未ログイン時のみ（要方針: 誰が登録可能か） |

---

## 利用者向け（一般利用者以上）

| パス（案） | 画面名 | 説明 | アクセス |
|------------|--------|------|----------|
| `/` または `/dashboard` | トップ / ダッシュボード | 自分のQRコード + 現在貸出中書籍一覧 | 一般, 司書, sys |
| `/books` | 蔵書一覧・検索 | タイトル・著者・出版社・ISBN で検索、一覧表示 | 一般, 司書, sys |
| `/books/[id]` | 書籍詳細 | 1冊の書誌・表紙・タグ・お気に入り（星マークで登録・解除）・貸出状況等 | 一般, 司書, sys |
| `/loans` | 貸出履歴（自分の） | 自分の貸出・返却履歴一覧。貸出日・返却日・書籍・貸出日数 | 一般, 司書, sys |
| `/account` または `/profile` | ユーザー情報 | 自分の名前・メール・会員証QR表示 | 一般, 司書, sys |

※ 利用者はシステム上で貸出・返却の操作は行わない（受付で会員証提示のみ）。

---

## 受付者・管理者向け（司書・システム管理者）

| パス（案） | 画面名 | 説明 | アクセス |
|------------|--------|------|----------|
| `/reception/loan` | 貸出処理 | ISBN入力・会員証QRスキャンで貸出登録 | 司書, sys |
| `/reception/return` | 返却処理 | ISBN入力・会員証QRスキャンで返却登録 | 司書, sys |
| `/reception/loans` | 貸出履歴一覧 | 全利用者の貸出・返却履歴。貸出中／返却済みフィルタ | 司書, sys |
| `/admin/books` | 蔵書管理 | 蔵書登録・削除・一覧（国会図書館API連携含む） | 司書, sys |
| `/admin/books/new` | 蔵書登録 | 新規書籍登録（必須項目・表紙画像） | 司書, sys |
| `/admin/books/[id]/edit` | 蔵書編集 | 既存書籍の編集・削除・タグの付与・解除 | 司書, sys |
| `/admin/tags` | タグ管理 | タグマスタの追加・名前変更・削除。書籍編集画面でタグを付与する | 司書, sys |
| `/admin/tags/[id]/edit` | タグ編集 | タグ名の変更 | 司書, sys |
| `/admin/users` | 利用者管理 | 利用者一覧・編集・無効化・返却依頼メール送信 | 司書, sys |
| `/admin/inventory` | 棚卸 | 蔵書の棚卸（一覧・状態確認） | 司書, sys |

※ 一般利用者は上記 `/reception/*`, `/admin/*` にアクセス不可（403 または リダイレクト）。

---

## システム管理者のみ（必要に応じて）

| パス（案） | 画面名 | 説明 | アクセス |
|------------|--------|------|----------|
| `/admin/settings` | システム設定 | 運用設定・役割付与等 | sys |

---

## 共通・レイアウト

| パス（案） | 説明 |
|------------|------|
| `layout.tsx`（ルート） | 全体レイアウト・認証チェック |
| `(auth)/` グループ | ログイン・登録など認証まわり |
| `(main)/` グループ | ログイン後のメインエリア（トップ・蔵書・アカウント） |
| `(reception)/` または `(admin)/` | 受付・管理画面（役割チェック） |

---

## アクセス制御の整理

| 役割 | 利用可能な画面 |
|------|----------------|
| 一般利用者 | トップ（QR+貸出中一覧）, 蔵書一覧・詳細（お気に入り登録可）, 貸出履歴（自分の）, ユーザー情報, ログイン・登録 |
| 司書・管理者 | 上記 ＋ 貸出処理, 返却処理, 貸出履歴一覧（全件）, 蔵書管理, タグ管理, 利用者管理, 棚卸 |
| システム管理者 | 上記 ＋ システム設定（必要なら） |

未ログイン: ログイン画面・会員登録画面以外は参照不可（リダイレクト）。
